# This file was generated by go2nix.
{ stdenv, lib, go16Packages, fetchgit, fetchhg, fetchbzr, fetchsvn }:

with go16Packages;

buildGoPackage rec {
  name = "terraform-${version}";
  version = "0.6.15";
  rev = "v${version}";
  
  goPackagePath = "github.com/hashicorp/terraform";

  src = fetchgit {
    inherit rev;
    url = "https://github.com/hashicorp/terraform";
    sha256 = "1mf98hagb0yp40g2mbar7aw7hmpq01clnil6y9khvykrb33vy0nb";
  };

  postInstall = ''
    # prefix all the plugins with "terraform-"
    for i in $bin/bin/*; do
      if [[ ! $(basename $i) =~ terraform* ]]; then
        mv -v $i $bin/bin/terraform-$(basename $i);
      fi
    done
  '';
}
